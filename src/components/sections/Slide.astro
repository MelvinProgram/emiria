---
const slides = [
  {
    title: "Cuidado capilar premium",
    subtitle: "Fórmulas limpias para un cabello sano y natural",
    image: "/images/slide-1.jpg",
    cta: "Comprar ahora",
    link: "#productos",
  },
  {
    title: "Resultados visibles",
    subtitle: "Antes y después desde las primeras aplicaciones",
    image: "/images/slide-2.jpg",
    cta: "Ver resultados",
    link: "#antes-despues",
  },
  {
    title: "Belleza con propósito",
    subtitle: "Cada compra contribuye a una causa real",
    image: "/images/slide-3.jpg",
    cta: "Nuestra historia",
    link: "#impacto",
  },
];
---

<section class="relative h-[90vh] overflow-hidden">
  <!-- Slides -->
  <div id="slider" class="relative h-full">
    {slides.map((slide, index) => (
      <div
        class={`absolute inset-0 transition-opacity duration-700 ${
          index === 0 ? "opacity-100" : "opacity-0"
        }`}
        data-slide
      >
        {/* <!-- Imagen --> */}
        <img
          src={slide.image}
          alt={slide.title}
          class="h-full w-full object-cover object-center"
          loading={index === 0 ? "eager" : "lazy"}
          width="100%" height="100%"
        />

        {/* Overlay */}
        <div class="absolute inset-0 bg-black/30"></div>

        {/* <!-- Contenido --> */}
        <div class="absolute inset-0 flex items-center">
          <div class="mx-auto max-w-7xl px-6 text-center md:text-left text-white">
            <h1 class="mb-4 font-serif text-4xl md:text-5xl lg:text-6xl max-w-xl">
              {slide.title}
            </h1>

            <p class="mb-8 max-w-md text-base md:text-lg opacity-90">
              {slide.subtitle}
            </p>

            <a
              href={slide.link}
              class="inline-flex items-center justify-center rounded-full bg-[#9B9B7E] px-8 py-4 text-sm font-medium text-white hover:opacity-90"
            >
              {slide.cta}
            </a>
          </div>
        </div>
      </div>
    ))}
  </div>

  <!-- Controls -->
  <div class="absolute bottom-6 left-1/2 flex -translate-x-1/2 gap-3">
    {slides.map((_, i) => (
      <button
        class="h-2 w-2 rounded-full bg-white/60"
        data-dot
        aria-label={`Slide ${i + 1}`}
      ></button>
    ))}
  </div>

  <!-- JS -->
<script>
    let current = 0;
    const slides = document.querySelectorAll("[data-slide]");
    const dots = document.querySelectorAll("[data-dot]");

    function showSlide(index: number) {
        slides.forEach((slide, i) => {
            slide.classList.toggle("opacity-100", i === index);
            slide.classList.toggle("opacity-0", i !== index);
        });

    //   slides.forEach((slide, i) => {
    //     (slide as HTMLElement).style.opacity = i === index ? "1" : "0";
    //     });

    //   dots.forEach((dot, i) => {
    //     (dot as HTMLElement).style.opacity = i === index ? "1" : "0.5";
    //     });
      current = index;
    }

    dots.forEach((dot, i) => {
      dot.addEventListener("click", () => showSlide(i));
    });

    setInterval(() => {
      showSlide((current + 1) % slides.length);
    }, 6000);
  </script>
  
</section>